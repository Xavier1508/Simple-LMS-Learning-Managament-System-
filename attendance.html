<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS Data Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f8fa;
        }
        #sidebar {
            scrollbar-width: thin;
            scrollbar-color: #9A3412 #D97706; 
            background-color: #D97706;
        }
        #sidebar::-webkit-scrollbar {
            width: 8px;
        }
        #sidebar::-webkit-scrollbar-track {
            background: #D97706;
        }
        #sidebar::-webkit-scrollbar-thumb {
            background-color: #9A3412;
            border-radius: 10px;
        }
        .grade-table th, .grade-table td {
            padding: 12px 16px;
            text-align: left;
        }
        .grade-table th {
            font-weight: 600;
            color: #374151;
            background-color: #f9fafb;
        }
        .grade-A { color: #10B981; font-weight: 600; }
        .grade-B { color: #F59E0B; font-weight: 600; }
        .grade-C { color: #EF4444; font-weight: 600; }

        .status-Present { color: #10B981; font-weight: 600; }
        .status-Late { color: #F59E0B; font-weight: 600; }
        .status-Absent { color: #EF4444; font-weight: 600; }
    </style>
    <script type="module">
        import { createIcons, icons } from "https://cdn.jsdelivr.net/npm/lucide@latest";
        createIcons({ icons });
    </script>
</head>

<body>
    <div class="flex min-h-screen">
        <div id="sidebar" class="fixed top-0 left-0 w-64 h-full text-white overflow-y-auto z-20 shadow-xl bg-orange-700">
            
            <div class="p-4 bg-orange-800 h-16 flex items-center shadow-lg">
                <span class="text-xl font-extrabold tracking-tight">Ascend <span class="font-normal text-yellow-300">LMS</span></span>
            </div>

            <nav class="mt-4">
                <a href="#" onclick="renderContent('dashboard')" id="nav-dashboard" class="nav-link flex items-center p-4 pl-6 text-sm hover:bg-orange-800 transition duration-150">
                    <span data-lucide="layout-dashboard" class="w-5 h-5 mr-3 opacity-80"></span>
                    Dashboard
                </a>
                <a href="#" onclick="renderContent('courses')" id="nav-courses" class="nav-link flex items-center p-4 pl-6 text-sm hover:bg-orange-800 transition duration-150">
                    <span data-lucide="book-open-text" class="w-5 h-5 mr-3 opacity-80"></span>
                    Courses
                </a>
                <a href="#" onclick="renderContent('assessment')" id="nav-assessment" class="nav-link flex items-center p-4 pl-6 text-sm hover:bg-orange-800 transition duration-150">
                    <span data-lucide="file-check" class="w-5 h-5 mr-3 opacity-80"></span>
                    Assessment
                </a>
                <a href="#" onclick="renderContent('gradebook')" id="nav-gradebook" class="nav-link flex items-center p-4 pl-6 text-sm hover:bg-orange-800 transition duration-150">
                    <span data-lucide="graduation-cap" class="w-5 h-5 mr-3 opacity-80"></span>
                    Gradebook
                </a>

                <a href="#" onclick="renderContent('attendance')" id="nav-attendance" class="nav-link flex items-center p-4 pl-6 text-sm hover:bg-orange-800 transition duration-150">
                    <span data-lucide="calendar-check" class="w-5 h-5 mr-3 opacity-80"></span>
                    Attendance
                </a>
            </nav>
        </div>

        <div class="flex-1 ml-64 flex flex-col">
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-end px-6 sticky top-0 z-10 shadow-sm">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2 cursor-pointer">
                        <img class="h-9 w-9 rounded-full object-cover" src="https://placehold.co/100x100/D97706/FFFFFF?text=JP" alt="User Profile">
                        <span data-lucide="chevron-down" class="w-4 h-4 text-gray-500"></span>
                    </div>
                </div>
            </header>

            <main id="main-content" class="flex-1 p-8">
            </main>
        </div>
    </div>

    <script>
        const gradeData = [
            {
                id: 'COMP6873', course: 'Blockchain Fundamental', section: 'LA07', credits: 3, score: 92.5, grade: 'A',
                details: [
                    { component: 'Midterm Test', weight: '30%', score: 95 },
                    { component: 'Final Project', weight: '35%', score: 90 },
                    { component: 'AOL', weight: '10%', score: 98 },
                ]
            },
            {
                id: 'COMP6062', course: 'Compilation Techniques', section: 'LA07', credits: 4, score: 88.0, grade: 'B+',
                details: [
                    { component: 'Midterm Test', weight: '30%', score: 85 },
                    { component: 'Final Project', weight: '35%', score: 92 },
                    { component: 'AOL', weight: '10%', score: 80 },
                ]
            },
            {
                id: 'COMP6646', course: 'Computer Forensic', section: 'LA07', credits: 3, score: 75.2, grade: 'C',
                details: [
                    { component: 'Midterm Test', weight: '30%', score: 68 },
                    { component: 'Final Project', weight: '35%', score: 78 },
                    { component: 'AOL', weight: '10%', score: 80 },
                ]
            },
        ];

        const attendanceLog = [
            { date: '2025-09-02', status: 'Present', remarks: 'On time' },
            { date: '2025-09-09', status: 'Late', remarks: 'Joined 15 minutes late' },
            { date: '2025-09-16', status: 'Present', remarks: 'On time' },
            { date: '2025-09-23', status: 'Absent', remarks: 'Unexcused absence' },
            { date: '2025-09-30', status: 'Present', remarks: 'On time' },
            { date: '2025-10-07', status: 'Present', remarks: 'On time' },
            { date: '2025-10-14', status: 'Present', remarks: 'On time' },
            { date: '2025-10-21', status: 'Absent', remarks: 'Medical leave' },
            { date: '2025-10-28', status: 'Present', remarks: 'On time' },
            { date: '2025-11-04', status: 'Late', remarks: 'Joined 5 minutes late' },
        ];
        
        const totalSessions = attendanceLog.length;
        const presentCount = attendanceLog.filter(a => a.status === 'Present').length;
        const lateCount = attendanceLog.filter(a => a.status === 'Late').length;
        const absentCount = attendanceLog.filter(a => a.status === 'Absent').length;
        const absenceRate = ((absentCount / totalSessions) * 100).toFixed(1);


        const mainContent = document.getElementById('main-content');
        const navLinks = document.querySelectorAll('.nav-link');


        const setActiveLink = (id) => {
            navLinks.forEach(link => {
                link.classList.remove('bg-orange-800', 'border-l-4', 'border-yellow-300', 'font-semibold');
                link.classList.add('opacity-80');
            });

            const activeLink = document.getElementById(`nav-${id}`);
            if (activeLink) {
                activeLink.classList.add('bg-orange-800', 'border-l-4', 'border-yellow-300', 'font-semibold');
                activeLink.classList.remove('opacity-80');
            }
        };

        window.toggleDetails = function(courseId) {
            const detailRow = document.getElementById(`details-${courseId}`);
            const icon = document.getElementById(`icon-${courseId}`);
            const mainRow = document.getElementById(`row-${courseId}`);

            if (detailRow.classList.contains('hidden')) {
                detailRow.classList.remove('hidden');
                icon.classList.add('rotate-180');
                mainRow.classList.add('bg-gray-100');
            } else {
                detailRow.classList.add('hidden');
                icon.classList.remove('rotate-180');
                mainRow.classList.remove('bg-gray-100');
            }
        }

        const coursesTemplate = () => `
            <h1 class="text-2xl font-bold text-gray-800 mb-6">My Courses</h1>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                ${gradeData.map(course => `
                    <!-- Course Card Component (Dynamic Content) -->
                    <div class="course-card bg-white p-6 rounded-lg shadow hover:shadow-lg transition duration-300 border border-gray-200 cursor-pointer">
                        <h2 class="text-lg font-semibold text-gray-900 mb-2">${course.course}</h2>
                        <p class="text-xs text-gray-600 mb-3">${course.id}001</p>
                        <div class="border-t border-gray-100 pt-4 mt-4">
                            <div class="flex justify-between items-center text-xs mb-1">
                                <span class="text-gray-600">Class progress:</span>
                                <span class="font-bold text-gray-800">${Math.floor(course.score * 0.4)}%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5">
                                <div class="bg-orange-500 h-1.5 rounded-full" style="width: ${Math.floor(course.score * 0.4)}%"></div>
                            </div>
                        </div>
                    </div>
                `).join('')}

                <!-- Static Find More Courses Card -->
                <div class="course-card bg-white p-6 rounded-lg shadow hover:shadow-lg transition duration-300 border border-gray-200 cursor-pointer flex flex-col justify-center items-center h-full text-center">
                    <span data-lucide="search" class="w-10 h-10 text-orange-500 mb-4"></span>
                    <h3 class="text-lg font-semibold text-gray-700">Find More Courses</h3>
                </div>
            </div>
        `;

        const gradebookTemplate = () => `
            <h1 class="text-2xl font-bold text-gray-800 mb-6">Gradebook</h1>

            <!-- Summary Cards -->
            <div class="flex flex-col sm:flex-row md:justify-end gap-4 mb-8">
                <div class="bg-white p-4 rounded-lg shadow-md border border-gray-200 flex items-center space-x-3 w-full sm:w-1/2 md:w-auto">
                    <span data-lucide="zap" class="w-6 h-6 text-orange-600"></span>
                    <div>
                        <p class="text-xs text-gray-500 font-medium">Total Credits Taken</p>
                        <p class="text-xl font-bold text-gray-900">17</p>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-lg shadow-md border border-gray-200 flex items-center space-x-3 w-full sm:w-1/2 md:w-auto">
                    <span data-lucide="award" class="w-6 h-6 text-emerald-600"></span>
                    <div>
                        <p class="text-xs text-gray-500 font-medium">Semester GPA</p>
                        <p class="text-xl font-bold text-emerald-600">3.74</p>
                    </div>
                </div>
            </div>

            <!-- Detailed Grade Table (Dynamic Content/Toggle Logic) -->
            <div class="bg-white rounded-lg shadow-xl overflow-x-auto">
                <table class="grade-table w-full text-sm text-gray-700">
                    <thead class="text-xs uppercase">
                        <tr>
                            <th class="rounded-tl-lg">Course Name</th>
                            <th>ID</th>
                            <th>Credits</th>
                            <th>Final Score</th>
                            <th class="rounded-tr-lg">Letter Grade</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                        ${gradeData.map(course => `
                            <!-- Main Course Row -->
                            <tr id="row-${course.id}" class="hover:bg-gray-50 transition duration-100 cursor-pointer" onclick="toggleDetails('${course.id}')">
                                <td class="font-medium text-gray-900">${course.course}</td>
                                <td>${course.id}</td>
                                <td>${course.credits}</td>
                                <td>${course.score}</td>
                                <td class="flex justify-between items-center pr-4">
                                    <span class="grade-${course.grade.charAt(0)}">${course.grade}</span>
                                    <span data-lucide="chevron-down" class="w-4 h-4 text-gray-400 transform transition-transform duration-300" id="icon-${course.id}"></span>
                                </td>
                            </tr>
                            <!-- Detail Dropdown Row (Toggle relies on JS) -->
                            <tr id="details-${course.id}" class="hidden border-b border-gray-100">
                                <td colspan="5" class="p-0">
                                    <div class="px-6 py-4 bg-gray-50">
                                        <h4 class="text-sm font-semibold mb-3 text-gray-700 border-b pb-2">Assessment Breakdown:</h4>
                                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
                                            ${course.details.map(detail => `
                                                <div class="p-3 bg-white border border-gray-200 rounded-lg shadow-sm">
                                                    <p class="text-xs font-medium text-gray-500">${detail.component}</p>
                                                    <p class="text-xs font-medium text-gray-400 mb-1">Weight: ${detail.weight}</p>
                                                    <p class="text-xl font-bold text-orange-600">${detail.score}</p>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                    <tfoot class="bg-gray-50 border-t border-gray-200">
                        <tr>
                            <td colspan="3" class="text-right font-bold text-gray-800">Total GPA (Cumulative):</td>
                            <td colspan="2" class="font-bold text-emerald-600">3.74 / 4.00</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        `;

        const attendanceTemplate = () => `
            <h1 class="text-2xl font-bold text-gray-800 mb-6">Attendance Overview</h1>

            <!-- Summary Cards (Values calculated by JS) -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200 flex flex-col items-start">
                    <p class="text-xs text-gray-500 font-medium">Total Sessions</p>
                    <p class="text-2xl font-bold text-gray-900 mt-1">${totalSessions}</p>
                </div>

                <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200 flex flex-col items-start">
                    <p class="text-xs text-gray-500 font-medium">Sessions Present</p>
                    <p class="text-2xl font-bold text-emerald-600 mt-1">${presentCount}</p>
                </div>

                <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200 flex flex-col items-start">
                    <p class="text-xs text-gray-500 font-medium">Sessions Late</p>
                    <p class="text-2xl font-bold text-orange-500 mt-1">${lateCount}</p>
                </div>

                <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200 flex flex-col items-start">
                    <p class="text-xs text-gray-500 font-medium">Absence Rate</p>
                    <p class="text-2xl font-bold text-red-600 mt-1">${absenceRate}%</p>
                </div>
            </div>

            <!-- Attendance Log Table (Data mapping relies on JS) -->
            <div class="bg-white rounded-lg shadow-xl overflow-x-auto">
                <h2 class="text-lg font-semibold text-gray-800 p-4 border-b">Detailed Attendance Log</h2>
                <table class="grade-table w-full text-sm text-gray-700">
                    <thead class="text-xs uppercase">
                        <tr>
                            <th class="rounded-tl-lg">Date</th>
                            <th>Session Topic</th>
                            <th>Status</th>
                            <th class="rounded-tr-lg">Remarks</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                        ${attendanceLog.map(log => `
                            <tr class="hover:bg-gray-50 transition duration-100">
                                <td class="font-medium text-gray-900">${new Date(log.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</td>
                                <td>Lesson on Network Protocols</td> <!-- Mocked topic -->
                                <td class="status-${log.status}">
                                    <div class="flex items-center">
                                        <span data-lucide="${log.status === 'Present' ? 'check-circle' : log.status === 'Late' ? 'clock-history' : 'x-circle'}" class="w-4 h-4 mr-2"></span>
                                        ${log.status}
                                    </div>
                                </td>
                                <td class="text-gray-600">${log.remarks || 'N/A'}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            </div>
        `;

        const renderContent = (view) => {
            let contentHtml = '';
            if (view === 'courses') {
                contentHtml = coursesTemplate();
            } else if (view === 'gradebook') {
                contentHtml = gradebookTemplate();
            } else if (view === 'attendance') {
                contentHtml = attendanceTemplate();
            }

            mainContent.innerHTML = contentHtml;
            if (typeof createIcons !== 'undefined') {
                createIcons({ icons });
            }
            setActiveLink(view);
        };


        window.onload = function() {
            renderContent('attendance');
        };
    </script>
</body>
</html>
